{"version":3,"sources":["../../src/utils/webpack-utils.js"],"names":["autoprefixer","require","flexbugs","TerserPlugin","MiniCssExtractPlugin","OptimizeCssAssetsPlugin","isWsl","GatsbyWebpackStatsExtractor","GatsbyWebpackEslintGraphqlSchemaReload","builtinPlugins","eslintConfig","module","exports","stage","program","assetRelativeRoot","vendorRegex","supportedBrowsers","browserslist","PRODUCTION","includes","isSSR","makeExternalOnly","original","options","rule","include","makeInternalOnly","exclude","ident","loaders","json","loader","resolve","yaml","null","raw","style","miniCssExtract","css","sourceMap","camelCase","localIdentName","postcss","plugins","overrideBrowserslist","postcssOpts","flexbox","file","name","url","limit","js","dependencies","eslint","schema","imports","rules","modulesThatUseGatsby","test","modulePath","some","path","type","use","configFile","compact","jsOptions","babelrc","presets","sourceMaps","cacheIdentifier","version","enforce","fonts","images","media","miscAssets","browsers","importLoaders","unshift","hmr","modules","internal","external","cssModules","minifyJs","terserOptions","cache","parallel","ie8","mangle","safari10","parse","ecma","compress","output","minifyCss","cssProcessorPluginOptions","preset","svgo","full","removeUselessDefs","addAttributesToSVGElement","addClassesToSVGElement","cleanupAttrs","cleanupEnableBackground","cleanupIDs","cleanupListOfValues","cleanupNumericValues","collapseGroups","convertColors","convertPathData","convertStyleToAttrs","convertTransform","inlineStyles","mergePaths","minifyStyles","moveElemsAttrsToGroup","moveGroupAttrsToElems","prefixIds","removeAttributesBySelector","removeAttrs","removeComments","removeDesc","removeDimensions","removeDoctype","removeEditorsNSData","removeElementsByAttr","removeEmptyAttrs","removeEmptyContainers","removeEmptyText","removeHiddenElems","removeMetadata","removeNonInheritableGroupAttrs","removeOffCanvasPaths","removeRasterImages","removeScriptElement","removeStyleElement","removeTitle","removeUnknownsAndDefaults","removeUnusedNS","removeUselessStrokeAndFill","removeXMLNS","removeXMLProcInst","reusePaths","sortAttrs","extractText","filename","chunkFilename","moment","ignore","extractStats","eslintGraphqlSchemaReload"],"mappings":"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","sourcesContent":["// @flow\n\nconst autoprefixer = require(`autoprefixer`)\nconst flexbugs = require(`postcss-flexbugs-fixes`)\nconst TerserPlugin = require(`terser-webpack-plugin`)\nconst MiniCssExtractPlugin = require(`mini-css-extract-plugin`)\nconst OptimizeCssAssetsPlugin = require(`optimize-css-assets-webpack-plugin`)\nconst isWsl = require(`is-wsl`)\n\nconst GatsbyWebpackStatsExtractor = require(`./gatsby-webpack-stats-extractor`)\nconst GatsbyWebpackEslintGraphqlSchemaReload = require(`./gatsby-webpack-eslint-graphql-schema-reload-plugin`)\n\nconst builtinPlugins = require(`./webpack-plugins`)\nconst eslintConfig = require(`./eslint-config`)\n\ntype LoaderSpec = string | { loader: string, options?: Object }\ntype LoaderResolver<T: Object> = (options?: T) => LoaderSpec\n\ntype Condition = string | RegExp | RegExp[]\n\ntype Rule = {\n  test?: Condition,\n  use: LoaderSpec[],\n  exclude?: Condition,\n  include?: Condition,\n}\n\ntype RuleFactory<T: Object> = (options?: T) => Rule\n\ntype ContextualRuleFactory = RuleFactory<*> & {\n  internal: RuleFactory<*>,\n  external: RuleFactory<*>,\n}\n\ntype PluginInstance = any\ntype PluginFactory = (...args?: any) => PluginInstance\n\ntype BuiltinPlugins = typeof builtinPlugins\n\ntype Stage = \"develop\" | \"develop-html\" | \"build-javascript\" | \"build-html\"\n\n/**\n * Configuration options for `createUtils`\n */\nexport type WebpackUtilsOptions = { stage: Stage, program: any }\n\n/**\n * Utils that produce webpack `loader` objects\n */\nexport type LoaderUtils = {\n  json: LoaderResolver<*>,\n  yaml: LoaderResolver<*>,\n  null: LoaderResolver<*>,\n  raw: LoaderResolver<*>,\n\n  style: LoaderResolver<*>,\n  css: LoaderResolver<*>,\n  postcss: LoaderResolver<{\n    browsers?: string[],\n    plugins?: Array<any> | ((loader: any) => Array<any>),\n  }>,\n\n  file: LoaderResolver<*>,\n  url: LoaderResolver<*>,\n  js: LoaderResolver<*>,\n  dependencies: LoaderResovler<*>,\n\n  miniCssExtract: LoaderResolver<*>,\n  imports: LoaderResolver<*>,\n  exports: LoaderResolver<*>,\n\n  eslint: LoaderResolver<*>,\n}\n\n/**\n * Utils that produce webpack rule objects\n */\nexport type RuleUtils = {\n  /**\n   * Handles JavaScript compilation via babel\n   */\n  js: RuleFactory<*>,\n  yaml: RuleFactory<*>,\n  fonts: RuleFactory<*>,\n  images: RuleFactory<*>,\n  miscAssets: RuleFactory<*>,\n\n  css: ContextualRuleFactory,\n  cssModules: RuleFactory<*>,\n  postcss: ContextualRuleFactory,\n\n  eslint: RuleFactory<*>,\n}\n\nexport type PluginUtils = BuiltinPlugins & {\n  extractText: PluginFactory,\n  uglify: PluginFactory,\n  moment: PluginFactory,\n  extractStats: PluginFactory,\n}\n\n/**\n * webpack atoms namespace\n */\nexport type WebpackUtils = {\n  loaders: LoaderUtils,\n\n  rules: RuleUtils,\n\n  plugins: PluginUtils,\n}\n\n/**\n * A factory method that produces an atoms namespace\n */\nmodule.exports = async ({\n  stage,\n  program,\n}: {\n  stage: Stage,\n  program: any,\n}): Promise<WebpackUtilsOptions> => {\n  const assetRelativeRoot = `static/`\n  const vendorRegex = /(node_modules|bower_components)/\n  const supportedBrowsers = program.browserslist\n\n  const PRODUCTION = !stage.includes(`develop`)\n\n  const isSSR = stage.includes(`html`)\n\n  const makeExternalOnly = (original: RuleFactory<*>) => (\n    options = {}\n  ): Rule => {\n    let rule = original(options)\n    rule.include = vendorRegex\n    return rule\n  }\n\n  const makeInternalOnly = (original: RuleFactory<*>) => (\n    options = {}\n  ): Rule => {\n    let rule = original(options)\n    rule.exclude = vendorRegex\n    return rule\n  }\n\n  let ident = 0\n\n  const loaders: LoaderUtils = {\n    json: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`json-loader`),\n      }\n    },\n\n    yaml: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`yaml-loader`),\n      }\n    },\n\n    null: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`null-loader`),\n      }\n    },\n\n    raw: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`raw-loader`),\n      }\n    },\n\n    style: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`style-loader`),\n      }\n    },\n\n    miniCssExtract: (options = {}) => {\n      return {\n        options,\n        // use MiniCssExtractPlugin only on production builds\n        loader: PRODUCTION\n          ? MiniCssExtractPlugin.loader\n          : require.resolve(`style-loader`),\n      }\n    },\n\n    css: (options = {}) => {\n      return {\n        loader: isSSR\n          ? require.resolve(`css-loader/locals`)\n          : require.resolve(`css-loader`),\n        options: {\n          sourceMap: !PRODUCTION,\n          camelCase: `dashesOnly`,\n          // https://github.com/webpack-contrib/css-loader/issues/406\n          localIdentName: `[name]--[local]--[hash:base64:5]`,\n          ...options,\n        },\n      }\n    },\n\n    postcss: (options = {}) => {\n      let {\n        plugins,\n        overrideBrowserslist = supportedBrowsers,\n        ...postcssOpts\n      } = options\n\n      return {\n        loader: require.resolve(`postcss-loader`),\n        options: {\n          ident: `postcss-${++ident}`,\n          sourceMap: !PRODUCTION,\n          plugins: loader => {\n            plugins =\n              (typeof plugins === `function` ? plugins(loader) : plugins) || []\n\n            return [\n              flexbugs,\n              autoprefixer({ overrideBrowserslist, flexbox: `no-2009` }),\n              ...plugins,\n            ]\n          },\n          ...postcssOpts,\n        },\n      }\n    },\n\n    file: (options = {}) => {\n      return {\n        loader: require.resolve(`file-loader`),\n        options: {\n          name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n          ...options,\n        },\n      }\n    },\n\n    url: (options = {}) => {\n      return {\n        loader: require.resolve(`url-loader`),\n        options: {\n          limit: 10000,\n          name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n          ...options,\n        },\n      }\n    },\n\n    js: options => {\n      return {\n        options: {\n          stage,\n          ...options,\n        },\n        loader: require.resolve(`./babel-loader`),\n      }\n    },\n\n    dependencies: options => {\n      return {\n        options,\n        loader: require.resolve(`babel-loader`),\n      }\n    },\n\n    eslint: (schema = ``) => {\n      const options = eslintConfig(schema)\n\n      return {\n        options,\n        loader: require.resolve(`eslint-loader`),\n      }\n    },\n\n    imports: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`imports-loader`),\n      }\n    },\n\n    exports: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`exports-loader`),\n      }\n    },\n  }\n\n  /**\n   * Rules\n   */\n  const rules = {}\n\n  /**\n   * JavaScript loader via babel, includes userland code\n   * and packages that depend on `gatsby`\n   */\n  {\n    let js = ({ modulesThatUseGatsby = [], ...options } = {}) => {\n      return {\n        test: /\\.(js|mjs|jsx)$/,\n        include: modulePath => {\n          // when it's not coming from node_modules we treat it as a source file.\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If the module uses Gatsby as a dependency\n          // we want to treat it as src so we can extract queries\n          return modulesThatUseGatsby.some(module =>\n            modulePath.includes(module.path)\n          )\n        },\n        type: `javascript/auto`,\n        use: [\n          loaders.js({\n            ...options,\n            configFile: true,\n            compact: PRODUCTION,\n          }),\n        ],\n      }\n    }\n\n    rules.js = js\n  }\n\n  /**\n   * Node_modules JavaScript loader via babel\n   * Excludes core-js & babel-runtime to speedup babel transpilation\n   * Excludes modules that use Gatsby since the `rules.js` already transpiles those\n   */\n  {\n    let dependencies = ({ modulesThatUseGatsby = [] } = {}) => {\n      const jsOptions = {\n        babelrc: false,\n        configFile: false,\n        compact: false,\n        presets: [require.resolve(`babel-preset-gatsby/dependencies`)],\n        // If an error happens in a package, it's possible to be\n        // because it was compiled. Thus, we don't want the browser\n        // debugger to show the original code. Instead, the code\n        // being evaluated would be much more helpful.\n        sourceMaps: false,\n        cacheIdentifier: `${stage}---gatsby-dependencies@${\n          require(`babel-preset-gatsby/package.json`).version\n        }`,\n      }\n\n      return {\n        test: /\\.(js|mjs)$/,\n        exclude: modulePath => {\n          if (vendorRegex.test(modulePath)) {\n            // If dep uses Gatsby, exclude\n            if (\n              modulesThatUseGatsby.some(module =>\n                modulePath.includes(module.path)\n              )\n            ) {\n              return true\n            }\n            // If dep is babel-runtime or core-js, exclude\n            if (/@babel(?:\\/|\\\\{1,2})runtime|core-js/.test(modulePath)) {\n              return true\n            }\n\n            // If dep is in node_modules and none of the above, include\n            return false\n          }\n\n          // If dep is user land code, exclude\n          return true\n        },\n        type: `javascript/auto`,\n        use: [loaders.dependencies(jsOptions)],\n      }\n    }\n\n    rules.dependencies = dependencies\n  }\n\n  {\n    let eslint = schema => {\n      return {\n        enforce: `pre`,\n        test: /\\.jsx?$/,\n        exclude: vendorRegex,\n        use: [loaders.eslint(schema)],\n      }\n    }\n\n    rules.eslint = eslint\n  }\n\n  rules.yaml = () => {\n    return {\n      test: /\\.ya?ml/,\n      use: [loaders.json(), loaders.yaml()],\n    }\n  }\n\n  /**\n   * Font loader\n   */\n  rules.fonts = () => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(eot|otf|ttf|woff(2)?)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads image assets, inlines images via a data URI if they are below\n   * the size threshold\n   */\n  rules.images = () => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(ico|svg|jpg|jpeg|png|gif|webp)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads audio and video and inlines them via a data URI if they are below\n   * the size threshold\n   */\n  rules.media = () => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(mp4|webm|ogv|wav|mp3|m4a|aac|oga|flac)$/,\n    }\n  }\n\n  /**\n   * Loads assets without inlining\n   */\n  rules.miscAssets = () => {\n    return {\n      use: [loaders.file()],\n      test: /\\.pdf$/,\n    }\n  }\n\n  /**\n   * CSS style loader.\n   */\n  {\n    const css = ({ browsers, ...options } = {}) => {\n      const use = [\n        loaders.css({ ...options, importLoaders: 1 }),\n        loaders.postcss({ browsers }),\n      ]\n      if (!isSSR)\n        use.unshift(\n          loaders.miniCssExtract({ hmr: !PRODUCTION && !options.modules })\n        )\n\n      return {\n        use,\n        test: /\\.css$/,\n      }\n    }\n\n    /**\n     * CSS style loader, _excludes_ node_modules.\n     */\n    css.internal = makeInternalOnly(css)\n    css.external = makeExternalOnly(css)\n\n    const cssModules = options => {\n      const rule = css({ ...options, modules: true })\n      delete rule.exclude\n      rule.test = /\\.module\\.css$/\n      return rule\n    }\n\n    rules.css = css\n    rules.cssModules = cssModules\n  }\n\n  /**\n   * PostCSS loader.\n   */\n  {\n    const postcss = options => {\n      return {\n        test: /\\.css$/,\n        use: [loaders.css({ importLoaders: 1 }), loaders.postcss(options)],\n      }\n    }\n\n    /**\n     * PostCSS loader, _excludes_ node_modules.\n     */\n    postcss.internal = makeInternalOnly(postcss)\n    postcss.external = makeExternalOnly(postcss)\n    rules.postcss = postcss\n  }\n  /**\n   * Plugins\n   */\n  const plugins = { ...builtinPlugins }\n\n  /**\n   * Minify JavaScript code without regard for IE8. Attempts\n   * to parallelize the work to save time. Generally only add in Production\n   */\n  plugins.minifyJs = ({ terserOptions, ...options } = {}) =>\n    new TerserPlugin({\n      cache: true,\n      // We can't use parallel in WSL because of https://github.com/gatsbyjs/gatsby/issues/6540\n      // This issue was fixed in https://github.com/gatsbyjs/gatsby/pull/12636\n      parallel: !isWsl,\n      exclude: /\\.min\\.js/,\n      sourceMap: true,\n      terserOptions: {\n        ie8: false,\n        mangle: {\n          safari10: true,\n        },\n        parse: {\n          ecma: 8,\n        },\n        compress: {\n          ecma: 5,\n        },\n        output: {\n          ecma: 5,\n        },\n        ...terserOptions,\n      },\n      ...options,\n    })\n\n  plugins.minifyCss = (\n    options = {\n      cssProcessorPluginOptions: {\n        preset: [\n          `default`,\n          {\n            svgo: {\n              full: true,\n              plugins: [\n                {\n                  // potentially destructive plugins removed - see https://github.com/gatsbyjs/gatsby/issues/15629\n                  // convertShapeToPath: true,\n                  // removeViewBox: true,\n                  removeUselessDefs: true,\n                  addAttributesToSVGElement: true,\n                  addClassesToSVGElement: true,\n                  cleanupAttrs: true,\n                  cleanupEnableBackground: true,\n                  cleanupIDs: true,\n                  cleanupListOfValues: true,\n                  cleanupNumericValues: true,\n                  collapseGroups: true,\n                  convertColors: true,\n                  convertPathData: true,\n                  convertStyleToAttrs: true,\n                  convertTransform: true,\n                  inlineStyles: true,\n                  mergePaths: true,\n                  minifyStyles: true,\n                  moveElemsAttrsToGroup: true,\n                  moveGroupAttrsToElems: true,\n                  prefixIds: true,\n                  removeAttributesBySelector: true,\n                  removeAttrs: true,\n                  removeComments: true,\n                  removeDesc: true,\n                  removeDimensions: true,\n                  removeDoctype: true,\n                  removeEditorsNSData: true,\n                  removeElementsByAttr: true,\n                  removeEmptyAttrs: true,\n                  removeEmptyContainers: true,\n                  removeEmptyText: true,\n                  removeHiddenElems: true,\n                  removeMetadata: true,\n                  removeNonInheritableGroupAttrs: true,\n                  removeOffCanvasPaths: true,\n                  removeRasterImages: true,\n                  removeScriptElement: true,\n                  removeStyleElement: true,\n                  removeTitle: true,\n                  removeUnknownsAndDefaults: true,\n                  removeUnusedNS: true,\n                  removeUselessStrokeAndFill: true,\n                  removeXMLNS: true,\n                  removeXMLProcInst: true,\n                  reusePaths: true,\n                  sortAttrs: true,\n                },\n              ],\n            },\n          },\n        ],\n      },\n    }\n  ) => new OptimizeCssAssetsPlugin(options)\n\n  /**\n   * Extracts css requires into a single file;\n   * includes some reasonable defaults\n   */\n  plugins.extractText = options =>\n    new MiniCssExtractPlugin({\n      filename: `[name].[contenthash].css`,\n      chunkFilename: `[name].[contenthash].css`,\n      ...options,\n    })\n\n  plugins.moment = () => plugins.ignore(/^\\.\\/locale$/, /moment$/)\n\n  plugins.extractStats = options => new GatsbyWebpackStatsExtractor(options)\n\n  plugins.eslintGraphqlSchemaReload = options =>\n    new GatsbyWebpackEslintGraphqlSchemaReload(options)\n\n  return {\n    loaders,\n    rules: (rules: RuleUtils),\n    plugins: (plugins: PluginUtils),\n  }\n}\n"],"file":"webpack-utils.js"}