{"version":3,"sources":["../../src/utils/webpack-error-utils.js"],"names":["reporter","require","stageCodeToReadableLabel","develop","transformWebpackError","stage","webpackError","id","filePath","module","resource","location","error","loc","start","undefined","context","stageLabel","message","exports","structureWebpackErrors","Array","isArray","map","e","reportWebpackWarnings","stats","compilation","warnings","forEach","webpackWarning","warning","warn","toString"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAE,yBAAF,CAAxB;;AAEA,MAAMC,wBAAwB,GAAG;AAC/B,sBAAqB,+BADU;AAE/B,gBAAe,uBAFgB;AAG/BC,EAAAA,OAAO,EAAG;AAHqB,CAAjC;;AAMA,MAAMC,qBAAqB,GAAG,CAACC,KAAD,EAAQC,YAAR,KAAyB;AAAA;;AACrD,SAAO;AACLC,IAAAA,EAAE,EAAG,OADA;AAELC,IAAAA,QAAQ,EAAEF,YAAF,aAAEA,YAAF,+CAAEA,YAAY,CAAEG,MAAhB,yDAAE,qBAAsBC,QAF3B;AAGLC,IAAAA,QAAQ,EACN,CAAAL,YAAY,SAAZ,IAAAA,YAAY,WAAZ,qCAAAA,YAAY,CAAEG,MAAd,gFAAsBC,QAAtB,MAAkCJ,YAAlC,aAAkCA,YAAlC,8CAAkCA,YAAY,CAAEM,KAAhD,wDAAkC,oBAAqBC,GAAvD,IACI;AACEC,MAAAA,KAAK,EAAER,YAAY,CAACM,KAAb,CAAmBC;AAD5B,KADJ,GAIIE,SARD;AASLC,IAAAA,OAAO,EAAE;AACPX,MAAAA,KADO;AAEPY,MAAAA,UAAU,EAAEf,wBAAwB,CAACG,KAAD,CAF7B;AAGPa,MAAAA,OAAO,EAAE,CAAAZ,YAAY,SAAZ,IAAAA,YAAY,WAAZ,oCAAAA,YAAY,CAAEM,KAAd,8EAAqBM,OAArB,MAAgCZ,YAAhC,aAAgCA,YAAhC,uBAAgCA,YAAY,CAAEY,OAA9C;AAHF,KATJ,CAeL;AACA;AACA;AACA;AACA;;AAnBK,GAAP;AAqBD,CAtBD;;AAwBAC,OAAO,CAACC,sBAAR,GAAiC,CAACf,KAAD,EAAQC,YAAR,KAAyB;AACxD,MAAIe,KAAK,CAACC,OAAN,CAAchB,YAAd,CAAJ,EAAiC;AAC/B,WAAOA,YAAY,CAACiB,GAAb,CAAiBC,CAAC,IAAIpB,qBAAqB,CAACC,KAAD,EAAQmB,CAAR,CAA3C,CAAP;AACD;;AAED,SAAOpB,qBAAqB,CAACC,KAAD,EAAQC,YAAR,CAA5B;AACD,CAND;;AAQAa,OAAO,CAACM,qBAAR,GAAgCC,KAAK,IAAI;AACvCA,EAAAA,KAAK,CAACC,WAAN,CAAkBC,QAAlB,CAA2BC,OAA3B,CAAmCC,cAAc,IAAI;AACnD,QAAIA,cAAc,CAACC,OAAnB,EAA4B;AAC1B;AACA/B,MAAAA,QAAQ,CAACgC,IAAT,CAAcF,cAAc,CAACC,OAAf,CAAuBE,QAAvB,EAAd;AACD,KAHD,MAGO;AACLjC,MAAAA,QAAQ,CAACgC,IAAT,CAAcF,cAAc,CAACZ,OAA7B;AACD;AACF,GAPD;AAQD,CATD","sourcesContent":["const reporter = require(`gatsby-cli/lib/reporter`)\n\nconst stageCodeToReadableLabel = {\n  \"build-javascript\": `Generating JavaScript bundles`,\n  \"build-html\": `Generating SSR bundle`,\n  develop: `Generating development JavaScript bundle`,\n}\n\nconst transformWebpackError = (stage, webpackError) => {\n  return {\n    id: `98123`,\n    filePath: webpackError?.module?.resource,\n    location:\n      webpackError?.module?.resource && webpackError?.error?.loc\n        ? {\n            start: webpackError.error.loc,\n          }\n        : undefined,\n    context: {\n      stage,\n      stageLabel: stageCodeToReadableLabel[stage],\n      message: webpackError?.error?.message || webpackError?.message,\n    },\n\n    // We use original error to display stack trace for the most part.\n    // In case of webpack error stack will include internals of webpack\n    // or one of loaders (for example babel-loader) and doesn't provide\n    // much value to user, so it's purposely omitted.\n    // error: webpackError?.error || webpackError,\n  }\n}\n\nexports.structureWebpackErrors = (stage, webpackError) => {\n  if (Array.isArray(webpackError)) {\n    return webpackError.map(e => transformWebpackError(stage, e))\n  }\n\n  return transformWebpackError(stage, webpackError)\n}\n\nexports.reportWebpackWarnings = stats => {\n  stats.compilation.warnings.forEach(webpackWarning => {\n    if (webpackWarning.warning) {\n      // grab inner Exception if it exists\n      reporter.warn(webpackWarning.warning.toString())\n    } else {\n      reporter.warn(webpackWarning.message)\n    }\n  })\n}\n"],"file":"webpack-error-utils.js"}