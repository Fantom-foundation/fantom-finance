{"version":3,"sources":["../../src/schema/context.js"],"names":["LocalNodeModel","require","defaultFieldResolver","withResolverContext","schema","schemaComposer","context","customContext","nodeModel","nodeStore","createPageDependency","withContext","path","undefined","module","exports"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAqBC,OAAO,CAAE,cAAF,CAAlC;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAA2BD,OAAO,CAAE,aAAF,CAAxC;;AAEA,MAAME,mBAAmB,GAAG,CAAC;AAC3BC,EAAAA,MAD2B;AAE3BC,EAAAA,cAF2B;AAG3BC,EAAAA,OAH2B;AAI3BC,EAAAA,aAJ2B;AAK3BC,EAAAA;AAL2B,CAAD,KAMtB;AACJ,QAAMC,SAAS,GAAGR,OAAO,CAAE,aAAF,CAAzB;;AACA,QAAMS,oBAAoB,GAAGT,OAAO,CAAE,sCAAF,CAApC;;AAEA,MAAI,CAACO,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAG,IAAIR,cAAJ,CAAmB;AAC7BS,MAAAA,SAD6B;AAE7BL,MAAAA,MAF6B;AAG7BC,MAAAA,cAH6B;AAI7BK,MAAAA;AAJ6B,KAAnB,CAAZ;AAMD;;AAED,2BACMJ,OAAO,IAAI,EADjB,MAEMC,aAAa,IAAI,EAFvB;AAGEL,IAAAA,oBAHF;AAIEM,IAAAA,SAAS,EAAEA,SAAS,CAACG,WAAV,CAAsB;AAC/BC,MAAAA,IAAI,EAAEN,OAAO,GAAGA,OAAO,CAACM,IAAX,GAAkBC;AADA,KAAtB;AAJb;AAQD,CA3BD;;AA6BAC,MAAM,CAACC,OAAP,GAAiBZ,mBAAjB","sourcesContent":["const { LocalNodeModel } = require(`./node-model`)\nconst { defaultFieldResolver } = require(`./resolvers`)\n\nconst withResolverContext = ({\n  schema,\n  schemaComposer,\n  context,\n  customContext,\n  nodeModel,\n}) => {\n  const nodeStore = require(`../db/nodes`)\n  const createPageDependency = require(`../redux/actions/add-page-dependency`)\n\n  if (!nodeModel) {\n    nodeModel = new LocalNodeModel({\n      nodeStore,\n      schema,\n      schemaComposer,\n      createPageDependency,\n    })\n  }\n\n  return {\n    ...(context || {}),\n    ...(customContext || {}),\n    defaultFieldResolver,\n    nodeModel: nodeModel.withContext({\n      path: context ? context.path : undefined,\n    }),\n  }\n}\n\nmodule.exports = withResolverContext\n"],"file":"context.js"}